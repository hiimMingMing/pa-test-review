System.register("chunks:///_virtual/Enemy.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameMgr.ts"],(function(e){"use strict";var t,n,i,a,o,r,s,h,l,c,p,u,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,s=e.ProgressBar,h=e.Camera,l=e.instantiate,c=e.Vec3,p=e.Component},function(e){u=e.GameMgr,d=e.GameStates}],execute:function(){var f,m,y,b,P,g,B,v,z,E,w;o._RF.push({},"6824ezNostHFIO4fKqUKdz/","Enemy",void 0);var I=r.ccclass,D=r.property;e("Enemy",(f=I("Enemy"),m=D(Number),y=D(s),b=D(h),P=D(Number),f((v=t((B=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,i(t,"speed",v,a(t)),i(t,"healthBarPrefab",z,a(t)),i(t,"camera",E,a(t)),t.healthBar=null,i(t,"maxHP",w,a(t)),t.hp=50,t}n(t,e);var o=t.prototype;return o.onLoad=function(){this.hp=this.maxHP;var e=l(this.healthBarPrefab.node);e.parent=this.healthBarPrefab.node.parent,this.healthBar=e.getComponent(s)},o.update=function(e){if((u.Instance.GameState===d.PLAYING||u.Instance.GameState===d.RELOADING)&&(this.node.position.z<45?this.node.setPosition(this.node.position.x,this.node.position.y>0?this.node.position.y-this.speed*e:0,this.node.position.z+(this.node.position.y>0?0:this.speed*e)):(u.Instance.setState(d.END),console.log(this.node.position.z)),this.healthBar)){var t=new c(0,0,0);this.camera.convertToUINode(this.node.worldPosition,this.healthBar.node.parent,t),this.healthBar.node.position=t.add3f(0,50,0),this.healthBar.node.active=!0}},o.hit=function(e){this.hp-=e,this.healthBar.progress=this.hp/this.maxHP,this.hp<=0&&(u.Instance.addScore(1),this.node.destroy())},o.onDestroy=function(){this.healthBar.node.destroy()},t}(p)).prototype,"speed",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return window.GameDefines.ENEMY_SPEED}}),z=t(B.prototype,"healthBarPrefab",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(B.prototype,"camera",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(B.prototype,"maxHP",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=B))||g));o._RF.pop()}}}));

System.register("chunks:///_virtual/EnemyMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./utils.ts","./GameMgr.ts"],(function(e){"use strict";var t,n,i,a,r,s,o,c,p,u,m,l,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,o=e.Node,c=e.instantiate,p=e.Vec3,u=e.Component},function(e){m=e.Rand},function(e){l=e.GameMgr,h=e.GameStates}],execute:function(){var y,f,d,M,g;r._RF.push({},"7e564hAUXdBiL1yX+ZqoUPz","EnemyMgr",void 0);var w=s.ccclass,v=s.property;e("EnemyMgr",(y=w("EnemyMgr"),f=v(o),y((g=t((M=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,i(t,"enemy",g,a(t)),t.spawnTimeMin=.25,t.spawnTimeMax=1,t.spawnTime=1,t}n(t,e);var r=t.prototype;return r.init=function(){this.node.children.forEach((function(e){e.active&&e.destroy()}))},r.update=function(e){if((l.Instance.GameState===h.PLAYING||l.Instance.GameState===h.RELOADING)&&(this.spawnTime-=e,this.spawnTime<0)){this.spawnTime=m(this.spawnTimeMin,this.spawnTimeMax);var t=c(this.enemy);t.parent=this.node,t.active=!0,t.setPosition(new p(10*(Math.random()-.5),t.position.y))}},t}(u)).prototype,"enemy",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=M))||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/GameMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SingletonComponent.ts","./EnemyMgr.ts","./Gun.ts"],(function(t){"use strict";var e,i,r,n,a,o,s,u,c,l,m,h;return{setters:[function(t){e=t.inheritsLoose,i=t.createClass,r=t.applyDecoratedDescriptor,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,u=t.Node,c=t.Label},function(t){l=t.default},function(t){m=t.EnemyMgr},function(t){h=t.Gun}],execute:function(){var g,f,p,b,I,G,y,S,d,v,L,N,E,w,D,U,A,M,T;t("GameStates",void 0),o._RF.push({},"d4901S3vsJMubO6pLCvZxoG","GameMgr",void 0);var R,x=s.ccclass,z=s.property;!function(t){t[t.TUTORIAL=0]="TUTORIAL",t[t.PLAYING=1]="PLAYING",t[t.RELOADING=2]="RELOADING",t[t.PAUSE=3]="PAUSE",t[t.END=4]="END"}(R||(R=t("GameStates",{})));t("GameMgr",(g=x("GameMgr"),f=z(u),p=z(u),b=z(u),I=z(u),G=z(m),y=z(h),S=z(c),d=z(c),g((L=function(t){function r(){for(var e,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,n(e,"reloadUI",N,a(e)),n(e,"ingameUI",E,a(e)),n(e,"ingame",w,a(e)),n(e,"resultUI",D,a(e)),n(e,"enemyMgr",U,a(e)),n(e,"gun",A,a(e)),n(e,"scoretxt",M,a(e)),n(e,"timerTxt",T,a(e)),e.gameState=R.PLAYING,e.score=0,e.timer=window.GameDefines.TIMER,e}e(r,t);var o=r.prototype;return o.init=function(){this.score=0,this.timer=window.GameDefines.TIMER,this.scoretxt.string="Score: "+this.score,this.timerTxt.string="Time: "+this.timer+"s",this.enemyMgr.init(),this.gun.init()},o.onLoad=function(){t.prototype.onLoad.call(this)},o.setState=function(t){switch(this.gameState=t,this.reloadUI.active=!1,t){case R.PLAYING:this.ingame.active=!0,this.ingameUI.active=!0,this.resultUI.active=!1;break;case R.RELOADING:this.reloadUI.active=!0;break;case R.END:this.ingame.active=!1,this.ingameUI.active=!1,this.resultUI.active=!0}},o.update=function(t){this.GameState!==R.PLAYING&&this.GameState!==R.RELOADING||(this.timer-=t,this.timerTxt.string="Time: "+(Math.floor(this.timer)+1)+"s",this.timer<=0&&this.setState(R.END))},o.retry=function(){this.GameState===R.END&&(this.setState(R.PLAYING),this.init())},o.addScore=function(t){this.score+=t,this.scoretxt.string="Score: "+this.score,this.score>=window.GameDefines.SCORE_TO_WIN&&this.setState(R.END)},i(r,[{key:"GameState",get:function(){return this.gameState}},{key:"Score",get:function(){return this.score}}]),r}(l()),N=r(L.prototype,"reloadUI",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=r(L.prototype,"ingameUI",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=r(L.prototype,"ingame",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=r(L.prototype,"resultUI",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=r(L.prototype,"enemyMgr",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=r(L.prototype,"gun",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=r(L.prototype,"scoretxt",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=r(L.prototype,"timerTxt",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=L))||v));o._RF.pop()}}}));

System.register("chunks:///_virtual/Gun.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enemy.ts","./GameMgr.ts"],(function(e){"use strict";var t,n,i,a,o,r,s,c,u,l,m,h,f,p,G,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,s=e.Node,c=e.Camera,u=e.Canvas,l=e.Vec3,m=e.geometry,h=e.PhysicsSystem,f=e.Component},function(e){p=e.Enemy},function(e){G=e.GameMgr,d=e.GameStates}],execute:function(){var w,y,A,T,b,g,v,E,D,O,_,M,R;o._RF.push({},"c624f61/tJNhIjdLaSn1DOy","Gun",void 0);var L=r.ccclass,N=r.property;e("Gun",(w=L("Gun"),y=N(s),A=N(s),T=N(s),b=N(c),g=N(u),w((D=t((E=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,i(t,"touchZone",D,a(t)),i(t,"crosshair",O,a(t)),i(t,"bulletTrail",_,a(t)),i(t,"camera",M,a(t)),i(t,"canvas",R,a(t)),t.rof=window.GameDefines.RATE_OF_FIRE,t.shootTimeOut=1/t.rof,t.ammo=window.GameDefines.AMMO,t.centerX=0,t.centerY=0,t}n(t,e);var o=t.prototype;return o.start=function(){var e=document.getElementById("GameCanvas");this.centerX=e.width/2,this.centerY=e.height/2,console.log(e)},o.init=function(){this.ammo=window.GameDefines.AMMO},o.onLoad=function(){var e=this;this.touchZone.on(s.EventType.TOUCH_MOVE,(function(t){G.Instance.GameState===d.PLAYING&&e.updateGunRotate(t.getDelta())}))},o.update=function(e){G.Instance.GameState===d.PLAYING?(this.bulletTrail.active=!0,this.shootTimeOut-=e,this.shootTimeOut<=0&&(this.shootTimeOut=1/this.rof,this.shoot())):this.bulletTrail.active=!1},o.updateGunRotate=function(e){var t=this.camera.node.eulerAngles.x+e.y/10,n=this.camera.node.eulerAngles.y-e.x/10;t>window.GameDefines.MAX_ROTATE_ANGLE||t<-window.GameDefines.MAX_ROTATE_ANGLE||n>window.GameDefines.MAX_ROTATE_ANGLE||n<-window.GameDefines.MAX_ROTATE_ANGLE||this.camera.node.setRotationFromEuler(new l(t,n,0))},o.shoot=function(){if(this.ammo-=1,this.ammo<=0)G.Instance.setState(d.RELOADING);else{var e=new m.Ray;this.camera.screenPointToRay(this.centerX,this.centerY,e);if(h.instance.raycastClosest(e,4294967295,1e7,!0)){var t=h.instance.raycastClosestResult,n=(t.hitPoint,t.hitNormal,t.collider),i=(t.distance,n.getComponent(p));i&&i.hit(window.GameDefines.GUN_DAMAGE)}}},o.reload=function(){this.ammo=window.GameDefines.AMMO},t}(f)).prototype,"touchZone",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(E.prototype,"crosshair",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(E.prototype,"bulletTrail",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(E.prototype,"camera",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(E.prototype,"canvas",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=E))||v));o._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./Enemy.ts","./EnemyMgr.ts","./GameMgr.ts","./Gun.ts","./ReloadUI.ts","./ResultUI.ts","./SingletonComponent.ts","./utils.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/ReloadUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameMgr.ts","./Gun.ts"],(function(t){"use strict";var e,n,o,i,r,a,c,l,s,u,p,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,c=t.Animation,l=t.Node,s=t.Component},function(t){u=t.GameMgr,p=t.GameStates},function(t){d=t.Gun}],execute:function(){var f,m,h,g,y;r._RF.push({},"1c186f4Sj5AN63CFvagdqti","ReloadUI",void 0);var v=a.ccclass,R=a.property;t("ReloadUI",(f=v("ReloadUI"),m=R(d),f((y=e((g=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,o(e,"gun",y,i(e)),e.time=0,e}n(e,t);var r=e.prototype;return r.onEnable=function(){this.time=0,this.getComponent(c).play()},r.onLoad=function(){var t=this;this.node.on(l.EventType.TOUCH_END,(function(){console.log(t.time),t.time>.5&&t.time<1&&t.completeReload()}))},r.update=function(t){this.time+=t,this.time>=2&&this.completeReload()},r.completeReload=function(){this.gun.reload(),u.Instance.setState(p.PLAYING)},e}(s)).prototype,"gun",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=g))||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/ResultUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameMgr.ts"],(function(e){"use strict";var t,r,n,o,i,c,s,u,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,c=e._decorator,s=e.Label,u=e.Component},function(e){a=e.GameMgr}],execute:function(){var l,p,f,y,g;i._RF.push({},"56f82+JU9tFzbDHt7uHKdZ8","ResultUI",void 0);var h=c.ccclass,b=c.property;e("ResultUI",(l=h("ResultUI"),p=b(s),l((g=t((y=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return t=e.call.apply(e,[this].concat(i))||this,n(t,"scoreTxt",g,o(t)),t}return r(t,e),t.prototype.onEnable=function(){this.scoreTxt.string="Your score: "+a.Instance.Score},t}(u)).prototype,"scoreTxt",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=y))||f));i._RF.pop()}}}));

System.register("chunks:///_virtual/SingletonComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var t,e,o,i;return{setters:[function(n){t=n.inheritsLoose,e=n.createClass},function(n){o=n.cclegacy,i=n.Component}],execute:function(){n("default",(function(){var n=function(n){function o(){return n.apply(this,arguments)||this}return t(o,n),o.prototype.onLoad=function(){if(o.instance)throw o.instance.constructor.name+" instance already exist";o.instance=this},e(o,null,[{key:"Instance",get:function(){return this.instance}}]),o}(i);return n.instance=void 0,n})),o._RF.push({},"325ab1JexVLsYL3trM0wPel","SingletonComponent",void 0),o._RF.pop()}}}));

System.register("chunks:///_virtual/utils.ts",["cc"],(function(t){"use strict";var u;return{setters:[function(t){u=t.cclegacy}],execute:function(){t("Rand",(function(t,u){return Math.random()*(u-t)+t})),u._RF.push({},"a74b8uN2LxB74qI1FCfLmO8","utils",void 0),u._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});