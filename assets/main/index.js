System.register("chunks:///main.js",["cc"],(function(){"use strict";var e,t,n,i,r,o,a,s,c,l,u,h,p,f,m;return{setters:[function(d){e=d.cclegacy,t=d.Component,n=d._decorator,i=d.Node,r=d.instantiate,o=d.Vec3,a=d.Camera,s=d.Canvas,c=d.geometry,l=d.PhysicsSystem,u=d.Label,h=d.ProgressBar,p=d.MeshRenderer,f=d.Color,m=d.Animation}],execute:function(){function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function b(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,w(e,t)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function v(e,t,n,i,r){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var G,I,_,N,A;e._RF.push({},"325ab1JexVLsYL3trM0wPel","SingletonComponent",void 0),e._RF.pop(),e._RF.push({},"a74b8uN2LxB74qI1FCfLmO8","utils",void 0),e._RF.pop(),e._RF.push({},"7e564hAUXdBiL1yX+ZqoUPz","EnemyMgr",void 0);var R,T,M,D,O,P,L,S,z,U,F,Y,C,x=n.ccclass,H=n.property,B=(G=x("EnemyMgr"),I=H(i),G((A=v((N=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return g(t=e.call.apply(e,[this].concat(i))||this,"enemy",A,E(t)),t.spawnTimeMin=window.GameDefines.ENEMY_SPAWN_TIME_MIN,t.spawnTimeMax=window.GameDefines.ENEMY_SPAWN_TIME_MAX,t.spawnTime=window.GameDefines.ENEMY_SPAWN_TIME_MAX,t}y(t,e);var n=t.prototype;return n.init=function(){this.node.children.forEach((function(e){e.active&&e.destroy()}))},n.update=function(e){var t,n;if((Te.Instance.GameState===fe.PLAYING||Te.Instance.GameState===fe.RELOADING)&&(this.spawnTime-=e,this.spawnTime<0)){this.spawnTime=(t=this.spawnTimeMin,n=this.spawnTimeMax,Math.random()*(n-t)+t);var i=r(this.enemy);i.parent=this.node,i.active=!0,i.setPosition(new o(10*(Math.random()-.5),i.position.y))}},t}(t)).prototype,"enemy",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=N))||_);e._RF.pop(),e._RF.push({},"c624f61/tJNhIjdLaSn1DOy","Gun",void 0);var X,j,k,V,W,J,Z,q,K,Q,$,ee,te,ne,ie,re,oe,ae,se,ce,le,ue=n.ccclass,he=n.property,pe=(R=ue("Gun"),T=he(i),M=he(i),D=he(i),O=he(a),P=he(s),R((z=v((S=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return g(t=e.call.apply(e,[this].concat(i))||this,"touchZone",z,E(t)),g(t,"crosshair",U,E(t)),g(t,"bulletTrail",F,E(t)),g(t,"camera",Y,E(t)),g(t,"canvas",C,E(t)),t.rof=window.GameDefines.RATE_OF_FIRE,t.shootTimeOut=1/t.rof,t.ammo=window.GameDefines.AMMO,t.centerX=0,t.centerY=0,t}y(t,e);var n=t.prototype;return n.start=function(){var e=document.getElementById("GameCanvas");this.centerX=e.width/2,this.centerY=e.height/2,console.log(e)},n.init=function(){this.ammo=window.GameDefines.AMMO},n.onLoad=function(){var e=this;this.touchZone.on(i.EventType.TOUCH_MOVE,(function(t){Te.Instance.GameState===fe.PLAYING&&e.updateGunRotate(t.getDelta())}))},n.update=function(e){Te.Instance.GameState===fe.PLAYING?(this.bulletTrail.active=!0,this.shootTimeOut-=e,this.shootTimeOut<=0&&(this.shootTimeOut=1/this.rof,this.shoot())):this.bulletTrail.active=!1},n.updateGunRotate=function(e){var t=this.camera.node.eulerAngles.x+e.y/10,n=this.camera.node.eulerAngles.y-e.x/10;t>window.GameDefines.MAX_ROTATE_ANGLE||t<-window.GameDefines.MAX_ROTATE_ANGLE||n>window.GameDefines.MAX_ROTATE_ANGLE||n<-window.GameDefines.MAX_ROTATE_ANGLE||this.camera.node.setRotationFromEuler(new o(t,n,0))},n.shoot=function(){if(this.ammo-=1,this.ammo<=0)Te.Instance.setState(fe.RELOADING);else{var e=new c.Ray;this.camera.screenPointToRay(this.centerX,this.centerY,e);if(l.instance.raycastClosest(e,4294967295,1e7,!0)){var t=l.instance.raycastClosestResult,n=(t.hitPoint,t.hitNormal,t.collider),i=(t.distance,n.getComponent(Pe));i&&i.hit(window.GameDefines.GUN_DAMAGE)}}},n.reload=function(){this.ammo=window.GameDefines.AMMO},t}(t)).prototype,"touchZone",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=v(S.prototype,"crosshair",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=v(S.prototype,"bulletTrail",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=v(S.prototype,"camera",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=v(S.prototype,"canvas",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=S))||L);e._RF.pop(),e._RF.push({},"d4901S3vsJMubO6pLCvZxoG","GameMgr",void 0);var fe,me=n.ccclass,de=n.property;window.GameDefines||(window.GameDefines={RATE_OF_FIRE:10,GUN_DAMAGE:1,AMMO:50,MAX_ROTATE_ANGLE:30,ENEMY_SPAWN_TIME_MIN:.25,ENEMY_SPAWN_TIME_MAX:1,ENEMY_HP:3,ENEMY_SPEED:5,ENEMY_COLOR:{r:255,g:255,b:255},PARACHUTE_COLOR:{r:255,g:255,b:255},SCORE_TO_WIN:20,TIMER:30,EVIRONMENT:0,NIGHT_MODE:-1,VIGNETTE:!0,END_CARD:1}),function(e){e[e.TUTORIAL=0]="TUTORIAL",e[e.PLAYING=1]="PLAYING",e[e.RELOADING=2]="RELOADING",e[e.PAUSE=3]="PAUSE",e[e.END=4]="END"}(fe||(fe={}));var be,ye,we,Ee,ge,ve,Ge,Ie,_e,Ne,Ae,Re,Te=(X=me("GameMgr"),j=de(i),k=de(i),V=de(i),W=de(i),J=de(i),Z=de(B),q=de(pe),K=de(u),Q=de(u),X((ee=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return g(t=e.call.apply(e,[this].concat(i))||this,"reloadUI",te,E(t)),g(t,"ingameUI",ne,E(t)),g(t,"ingame",ie,E(t)),g(t,"resultUI",re,E(t)),g(t,"resultUI2",oe,E(t)),g(t,"enemyMgr",ae,E(t)),g(t,"gun",se,E(t)),g(t,"scoretxt",ce,E(t)),g(t,"timerTxt",le,E(t)),t.gameState=fe.PLAYING,t.score=0,t.timer=window.GameDefines.TIMER,t}y(t,e);var n=t.prototype;return n.init=function(){this.score=0,this.timer=window.GameDefines.TIMER,this.scoretxt.string="Eliminated: "+this.score,this.timerTxt.string="Time: "+this.timer+"s",this.enemyMgr.init(),this.gun.init()},n.onLoad=function(){e.prototype.onLoad.call(this)},n.setState=function(e){switch(this.gameState=e,this.reloadUI.active=!1,e){case fe.PLAYING:this.ingame.active=!0,this.ingameUI.active=!0,this.resultUI.active=!1,this.resultUI2.active=!1;break;case fe.RELOADING:this.reloadUI.active=!0;break;case fe.END:this.ingame.active=!1,this.ingameUI.active=!1,0===window.GameDefines.END_CARD?this.resultUI.active=!0:this.resultUI2.active=!0}},n.update=function(e){this.GameState!==fe.PLAYING&&this.GameState!==fe.RELOADING||(this.timer-=e,this.timerTxt.string="Time: "+(Math.floor(this.timer)+1)+"s",this.timer<=0&&this.setState(fe.END))},n.retry=function(){this.GameState===fe.END&&(this.setState(fe.PLAYING),this.init())},n.addScore=function(e){this.score+=e,this.scoretxt.string="Eliminated: "+this.score,this.score>=window.GameDefines.SCORE_TO_WIN&&this.setState(fe.END)},n.onProductLink=function(){window.open("https://www.google.com","blank")},b(t,[{key:"GameState",get:function(){return this.gameState}},{key:"Score",get:function(){return this.score}}]),t}(((be=function(e){function t(){return e.apply(this,arguments)||this}return y(t,e),t.prototype.onLoad=function(){if(t.instance)throw t.instance.constructor.name+" instance already exist";t.instance=this},b(t,null,[{key:"Instance",get:function(){return this.instance}}]),t}(t)).instance=void 0,be)),te=v(ee.prototype,"reloadUI",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=v(ee.prototype,"ingameUI",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=v(ee.prototype,"ingame",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=v(ee.prototype,"resultUI",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=v(ee.prototype,"resultUI2",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=v(ee.prototype,"enemyMgr",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=v(ee.prototype,"gun",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=v(ee.prototype,"scoretxt",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=v(ee.prototype,"timerTxt",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=ee))||$);e._RF.pop(),e._RF.push({},"6824ezNostHFIO4fKqUKdz/","Enemy",void 0);var Me,De=n.ccclass,Oe=n.property,Pe=(ye=De("Enemy"),we=Oe(Number),Ee=Oe(h),ge=Oe(a),ve=Oe(i),ye((_e=v((Ie=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return g(t=e.call.apply(e,[this].concat(i))||this,"speed",_e,E(t)),g(t,"healthBarPrefab",Ne,E(t)),g(t,"camera",Ae,E(t)),g(t,"parachute",Re,E(t)),t.healthBar=null,t.maxHP=window.GameDefines.ENEMY_HP,t.hp=window.GameDefines.ENEMY_HP,t}y(t,e);var n=t.prototype;return n.onLoad=function(){this.hp=this.maxHP;var e=r(this.healthBarPrefab.node);e.parent=this.healthBarPrefab.node.parent,this.healthBar=e.getComponent(h);var t=window.GameDefines.ENEMY_COLOR;this.getComponent(p).material.setProperty("albedo",new f(t.r,t.g,t.b),0);var n=window.GameDefines.PARACHUTE_COLOR;this.parachute.getComponent(p).material.setProperty("albedo",new f(n.r,n.g,n.b),0)},n.update=function(e){if((Te.Instance.GameState===fe.PLAYING||Te.Instance.GameState===fe.RELOADING)&&(this.node.position.y<=0&&(this.parachute.active=!1),this.node.position.z<45?this.node.setPosition(this.node.position.x,this.node.position.y>0?this.node.position.y-this.speed*e:0,this.node.position.z+(this.node.position.y>0?0:this.speed*e)):(Te.Instance.setState(fe.END),console.log(this.node.position.z)),this.healthBar)){var t=new o(0,0,0);this.camera.convertToUINode(this.node.worldPosition,this.healthBar.node.parent,t),this.healthBar.node.position=t.add3f(0,50,0),this.healthBar.node.active=!0}},n.hit=function(e){this.hp-=e,this.healthBar.progress=this.hp/this.maxHP,this.hp<=0&&(Te.Instance.addScore(1),this.node.destroy())},n.onDestroy=function(){this.healthBar.node.destroy()},t}(t)).prototype,"speed",[we],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return window.GameDefines.ENEMY_SPEED}}),Ne=v(Ie.prototype,"healthBarPrefab",[Ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ae=v(Ie.prototype,"camera",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Re=v(Ie.prototype,"parachute",[ve],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ge=Ie))||Ge);e._RF.pop(),e._RF.push({},"20b47I0+GFDDYLcGub1yHYo","Environments",void 0);var Le,Se=n.ccclass;n.property,Se("Environments")(Me=function(e){function t(){return e.apply(this,arguments)||this}return y(t,e),t.prototype.onLoad=function(){this.node.children[window.GameDefines.EVIRONMENT].active=!0},t}(t));e._RF.pop(),e._RF.push({},"967bduvj2lJepAmEup+Kuan","NightMode",void 0);var ze,Ue,Fe,Ye,Ce,xe=n.ccclass;n.property,xe("NightMode")(Le=function(e){function t(){return e.apply(this,arguments)||this}return y(t,e),t.prototype.onLoad=function(){window.GameDefines.NIGHT_MODE>=0&&(this.node.children[window.GameDefines.NIGHT_MODE].active=!0)},t}(t));e._RF.pop(),e._RF.push({},"1c186f4Sj5AN63CFvagdqti","ReloadUI",void 0);var He,Be,Xe,je,ke,Ve=n.ccclass,We=n.property;ze=Ve("ReloadUI"),Ue=We(pe),ze((Ce=v((Ye=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return g(t=e.call.apply(e,[this].concat(i))||this,"gun",Ce,E(t)),t.time=0,t}y(t,e);var n=t.prototype;return n.onEnable=function(){this.time=0,this.getComponent(m).play()},n.onLoad=function(){var e=this;this.node.on(i.EventType.TOUCH_END,(function(){console.log(e.time),e.time>.5&&e.time<1&&e.completeReload()}))},n.update=function(e){this.time+=e,this.time>=2&&this.completeReload()},n.completeReload=function(){this.gun.reload(),Te.Instance.setState(fe.PLAYING)},t}(t)).prototype,"gun",[Ue],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fe=Ye));e._RF.pop(),e._RF.push({},"56f82+JU9tFzbDHt7uHKdZ8","ResultUI",void 0);var Je,Ze=n.ccclass,qe=n.property;He=Ze("ResultUI"),Be=qe(u),He((ke=v((je=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return g(t=e.call.apply(e,[this].concat(i))||this,"scoreTxt",ke,E(t)),t}return y(t,e),t.prototype.onEnable=function(){this.scoreTxt.string="Eliminated: "+Te.Instance.Score},t}(t)).prototype,"scoreTxt",[Be],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Xe=je));e._RF.pop(),e._RF.push({},"cc1f71MJY9OObgA++ah5pDM","Vignette",void 0);var Ke=n.ccclass;n.property,Ke("Vignette")(Je=function(e){function t(){return e.apply(this,arguments)||this}return y(t,e),t.prototype.onLoad=function(){this.node.active=window.GameDefines.VIGNETTE},t}(t));e._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///main.js'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});
//# sourceMappingURL=index.js.map